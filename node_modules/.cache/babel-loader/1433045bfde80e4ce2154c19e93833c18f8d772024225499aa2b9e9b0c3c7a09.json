{"ast":null,"code":"import _toConsumableArray from\"/home/dante/projetos-trybe/sd-030-b-project-starwars-planets-search/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/dante/projetos-trybe/sd-030-b-project-starwars-planets-search/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import FilterContext from'./filterContext';import{jsx as _jsx}from\"react/jsx-runtime\";function FilterProvider(_ref){var children=_ref.children;var _useState=useState({column:'population',comparison:'maior que',value:0}),_useState2=_slicedToArray(_useState,2),selected=_useState2[0],setSelected=_useState2[1];var arrayOfOptions=['population','orbital_period','diameter','rotation_period','surface_water'];var _useState3=useState(arrayOfOptions),_useState4=_slicedToArray(_useState3,2),options=_useState4[0],setOptions=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),activeFilters=_useState6[0],setActiveFilters=_useState6[1];function RemoveOption(op){var newOptions=options.filter(function(option){return option!==op;});setOptions(newOptions);setSelected({column:options[0],comparison:'maior que',value:0});}function HandleFilter(op){setActiveFilters([].concat(_toConsumableArray(activeFilters),[selected]));RemoveOption(op);}function RemoveFilters(filter){if(!filter){setActiveFilters([]);setOptions(arrayOfOptions);}else{var newActiveFilters=activeFilters.filter(function(active){return active.column!==filter;});setActiveFilters(newActiveFilters);setOptions([].concat(_toConsumableArray(options),[filter]));}}function HandleFilterCases(planet){var conditions=[];activeFilters.forEach(function(filter){switch(filter.comparison){case'maior que':conditions.push(Number(planet[filter.column])>Number(filter.value));break;case'menor que':conditions.push(Number(planet[filter.column])<Number(filter.value));break;case'igual a':conditions.push(Number(planet[filter.column])===Number(filter.value));break;default:return true;}});return conditions.every(function(con){return con;});}return/*#__PURE__*/_jsx(FilterContext.Provider,{value:{selected:selected,setSelected:setSelected,activeFilters:activeFilters,HandleFilter:HandleFilter,HandleFilterCases:HandleFilterCases,options:options,RemoveFilters:RemoveFilters},children:children});}export default FilterProvider;","map":{"version":3,"names":["useState","FilterContext","FilterProvider","children","column","comparison","value","selected","setSelected","arrayOfOptions","options","setOptions","activeFilters","setActiveFilters","RemoveOption","op","newOptions","filter","option","HandleFilter","RemoveFilters","newActiveFilters","active","HandleFilterCases","planet","conditions","forEach","push","Number","every","con"],"sources":["/home/dante/projetos-trybe/sd-030-b-project-starwars-planets-search/src/context/filterProvider.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport FilterContext from './filterContext';\n\nfunction FilterProvider({ children }) {\n  const [selected, setSelected] = useState({\n    column: 'population',\n    comparison: 'maior que',\n    value: 0,\n  });\n\n  const arrayOfOptions = ['population', 'orbital_period',\n    'diameter', 'rotation_period', 'surface_water'];\n  const [options, setOptions] = useState(arrayOfOptions);\n\n  const [activeFilters, setActiveFilters] = useState([]);\n\n  function RemoveOption(op) {\n    const newOptions = options.filter((option) => option !== op);\n\n    setOptions(newOptions);\n    setSelected({\n      column: options[0],\n      comparison: 'maior que',\n      value: 0,\n    });\n  }\n\n  function HandleFilter(op) {\n    setActiveFilters([...activeFilters, selected]);\n\n    RemoveOption(op);\n  }\n\n  function RemoveFilters(filter) {\n    if (!filter) {\n      setActiveFilters([]);\n      setOptions(arrayOfOptions);\n    } else {\n      const newActiveFilters = activeFilters\n        .filter((active) => active.column !== filter);\n      setActiveFilters(newActiveFilters);\n      setOptions([...options, filter]);\n    }\n  }\n\n  function HandleFilterCases(planet) {\n    const conditions = [];\n\n    activeFilters.forEach((filter) => {\n      switch (filter.comparison) {\n      case 'maior que':\n        conditions.push(Number(planet[filter.column]) > Number(filter.value));\n        break;\n      case 'menor que':\n        conditions.push(Number(planet[filter.column]) < Number(filter.value));\n        break;\n      case 'igual a':\n        conditions.push(Number(planet[filter.column]) === Number(filter.value));\n        break;\n      default:\n        return true;\n      }\n    });\n\n    return conditions.every((con) => con);\n  }\n\n  return (\n    <FilterContext.Provider\n      value={\n        { selected,\n          setSelected,\n          activeFilters,\n          HandleFilter,\n          HandleFilterCases,\n          options,\n          RemoveFilters }\n      }\n    >\n      { children }\n    </FilterContext.Provider>\n  );\n}\n\nFilterProvider.propTypes = {\n  children: PropTypes.element.isRequired,\n};\n\nexport default FilterProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}